input: packages
output: .github/workflows/autogenerated-builder.yml

runs-on: ubuntu-latest
timeout: 360

overrides:
    guile2.0:
        gpg:
            - 3CE464558A84FDC69DB40CFB090B11993D9AEBB5
            - FF478FB264DE32EC296725A3DDC0F5358812F8F2

    hipmagma:
        runs-on: self-hosted
        timeout: 1440

    miopen-hip:
        runs-on: self-hosted
        timeout: 1440

    miopen-opencl:
        runs-on: self-hosted
        timeout: 1440

    python-pytorch-rocm:
        runs-on: self-hosted
        timeout: 1440

        pre-build-commands:
            - sed '/prepare()/a\  git config --global protocol.file.allow always' -i PKGBUILD
            - sed '/git submodule update/a\  sed "1i#include <mutex>" -i third_party/kineto/libkineto/src/RoctracerActivityApi.h' -i PKGBUILD
            - sed 's/79360/87773/g' -i PKGBUILD

    python-torchvision-rocm:
        runs-on: self-hosted
        timeout: 1440

    rccl:
        runs-on: self-hosted
        timeout: 1440

    rocblas:
        runs-on: self-hosted
        timeout: 1440

    rocfft:
        runs-on: self-hosted
        timeout: 1440

    rocm-llvm:
        runs-on: self-hosted
        timeout: 1444

    rocm-llvm-mlir:
        runs-on: self-hosted
        timeout: 1444

    rocsolver:
        runs-on: self-hosted
        timeout: 1440

    rocsparse:
        runs-on: self-hosted
        timeout: 1440
